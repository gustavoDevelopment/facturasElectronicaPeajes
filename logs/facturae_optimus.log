2025-05-13 16:09:29,009 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:10:43,798 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:10:43,802 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml
2025-05-13 16:10:43,803 - main.process.invoice_processor - ERROR - Error al extraer factura embebida: El contenido embebido no es un XML válido: Namespace prefix cbc on ID is not defined, line 2, column 36 (<string>, line 2)
2025-05-13 16:10:43,803 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml: No se pudo extraer la factura embebida: El contenido embebido no es un XML válido: Namespace prefix cbc on ID is not defined, line 2, column 36 (<string>, line 2)
2025-05-13 16:10:43,803 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 151, in _extract_embedded_invoice
    return etree.fromstring(description_elem.text.strip().encode('utf-8'))
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "src/lxml/etree.pyx", line 3307, in lxml.etree.fromstring
  File "src/lxml/parser.pxi", line 1995, in lxml.etree._parseMemoryDocument
  File "src/lxml/parser.pxi", line 1882, in lxml.etree._parseDoc
  File "src/lxml/parser.pxi", line 1164, in lxml.etree._BaseParser._parseDoc
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "<string>", line 2
lxml.etree.XMLSyntaxError: Namespace prefix cbc on ID is not defined, line 2, column 36

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 153, in _extract_embedded_invoice
    raise InvoiceFormatError(f"El contenido embebido no es un XML válido: {str(e)}")
main.process.invoice_processor.InvoiceFormatError: El contenido embebido no es un XML válido: Namespace prefix cbc on ID is not defined, line 2, column 36 (<string>, line 2)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 90, in process_invoice
    invoice_root = self._extract_embedded_invoice(root)
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 157, in _extract_embedded_invoice
    raise InvoiceFormatError(f"No se pudo extraer la factura embebida: {str(e)}") from e
main.process.invoice_processor.InvoiceFormatError: No se pudo extraer la factura embebida: El contenido embebido no es un XML válido: Namespace prefix cbc on ID is not defined, line 2, column 36 (<string>, line 2)
2025-05-13 16:10:43,852 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml
2025-05-13 16:10:43,853 - main.process.invoice_processor - ERROR - Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:10:43,853 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:10:43,853 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 82, in process_invoice
    tree = etree.parse(str(xml_path))
  File "src/lxml/etree.pyx", line 3590, in lxml.etree.parse
  File "src/lxml/parser.pxi", line 1958, in lxml.etree._parseDocument
  File "src/lxml/parser.pxi", line 1984, in lxml.etree._parseDocumentFromURL
  File "src/lxml/parser.pxi", line 1887, in lxml.etree._parseDocFromFile
  File "src/lxml/parser.pxi", line 1200, in lxml.etree._BaseParser._parseDocFromFile
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml", line 1
lxml.etree.XMLSyntaxError: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 87, in process_invoice
    raise InvoiceFormatError(error_msg) from e
main.process.invoice_processor.InvoiceFormatError: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:10:43,855 - main.process.invoice_processor - ERROR - El archivo no existe: ruta/inexistente.xml
2025-05-13 16:10:43,856 - main.process.invoice_processor - ERROR - Error al procesar la factura ruta/inexistente.xml: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:10:43,856 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 76, in process_invoice
    raise FileNotFoundError(error_msg)
FileNotFoundError: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:10:43,881 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:10:43,914 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:10:43,921 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/factura_ejemplo.xml
2025-05-13 16:10:43,922 - main.process.invoice_processor - WARNING - Error al procesar ítem de factura: no such group
2025-05-13 16:10:43,923 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 260, in _process_invoice_items
    toll_data = self._extract_toll_data(item_data['description'])
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 411, in _extract_toll_data
    'plate_number': match.group('plate').strip() if match.group('plate') else None
                                                    ~~~~~~~~~~~^^^^^^^^^
IndexError: no such group
2025-05-13 16:10:43,924 - main.process.invoice_processor - INFO - Factura FAC001-123 procesada exitosamente
2025-05-13 16:11:47,332 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:11:47,339 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml
2025-05-13 16:11:47,340 - main.process.invoice_processor - ERROR - Error al extraer factura embebida: El contenido embebido no es un XML válido: Namespace prefix cbc on ID is not defined, line 2, column 36 (<string>, line 2)
2025-05-13 16:11:47,340 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml: No se pudo extraer la factura embebida: El contenido embebido no es un XML válido: Namespace prefix cbc on ID is not defined, line 2, column 36 (<string>, line 2)
2025-05-13 16:11:47,340 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 151, in _extract_embedded_invoice
    return etree.fromstring(description_elem.text.strip().encode('utf-8'))
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "src/lxml/etree.pyx", line 3307, in lxml.etree.fromstring
  File "src/lxml/parser.pxi", line 1995, in lxml.etree._parseMemoryDocument
  File "src/lxml/parser.pxi", line 1882, in lxml.etree._parseDoc
  File "src/lxml/parser.pxi", line 1164, in lxml.etree._BaseParser._parseDoc
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "<string>", line 2
lxml.etree.XMLSyntaxError: Namespace prefix cbc on ID is not defined, line 2, column 36

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 153, in _extract_embedded_invoice
    raise InvoiceFormatError(f"El contenido embebido no es un XML válido: {str(e)}")
main.process.invoice_processor.InvoiceFormatError: El contenido embebido no es un XML válido: Namespace prefix cbc on ID is not defined, line 2, column 36 (<string>, line 2)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 90, in process_invoice
    invoice_root = self._extract_embedded_invoice(root)
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 157, in _extract_embedded_invoice
    raise InvoiceFormatError(f"No se pudo extraer la factura embebida: {str(e)}") from e
main.process.invoice_processor.InvoiceFormatError: No se pudo extraer la factura embebida: El contenido embebido no es un XML válido: Namespace prefix cbc on ID is not defined, line 2, column 36 (<string>, line 2)
2025-05-13 16:11:47,372 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml
2025-05-13 16:11:47,372 - main.process.invoice_processor - ERROR - Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:11:47,372 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:11:47,372 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 82, in process_invoice
    tree = etree.parse(str(xml_path))
  File "src/lxml/etree.pyx", line 3590, in lxml.etree.parse
  File "src/lxml/parser.pxi", line 1958, in lxml.etree._parseDocument
  File "src/lxml/parser.pxi", line 1984, in lxml.etree._parseDocumentFromURL
  File "src/lxml/parser.pxi", line 1887, in lxml.etree._parseDocFromFile
  File "src/lxml/parser.pxi", line 1200, in lxml.etree._BaseParser._parseDocFromFile
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml", line 1
lxml.etree.XMLSyntaxError: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 87, in process_invoice
    raise InvoiceFormatError(error_msg) from e
main.process.invoice_processor.InvoiceFormatError: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:11:47,375 - main.process.invoice_processor - ERROR - El archivo no existe: ruta/inexistente.xml
2025-05-13 16:11:47,375 - main.process.invoice_processor - ERROR - Error al procesar la factura ruta/inexistente.xml: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:11:47,375 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 76, in process_invoice
    raise FileNotFoundError(error_msg)
FileNotFoundError: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:11:47,396 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:11:47,414 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:11:47,420 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/factura_ejemplo.xml
2025-05-13 16:11:47,420 - main.process.invoice_processor - INFO - Factura FAC001-123 procesada exitosamente
2025-05-13 16:18:50,158 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:18:50,165 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml
2025-05-13 16:18:50,171 - main.process.invoice_processor - INFO - Factura FAC-EMB-001 procesada exitosamente
2025-05-13 16:18:50,188 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml
2025-05-13 16:18:50,189 - main.process.invoice_processor - ERROR - Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:18:50,189 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:18:50,189 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 82, in process_invoice
    tree = etree.parse(str(xml_path))
  File "src/lxml/etree.pyx", line 3590, in lxml.etree.parse
  File "src/lxml/parser.pxi", line 1958, in lxml.etree._parseDocument
  File "src/lxml/parser.pxi", line 1984, in lxml.etree._parseDocumentFromURL
  File "src/lxml/parser.pxi", line 1887, in lxml.etree._parseDocFromFile
  File "src/lxml/parser.pxi", line 1200, in lxml.etree._BaseParser._parseDocFromFile
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml", line 1
lxml.etree.XMLSyntaxError: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 87, in process_invoice
    raise InvoiceFormatError(error_msg) from e
main.process.invoice_processor.InvoiceFormatError: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:18:50,192 - main.process.invoice_processor - ERROR - El archivo no existe: ruta/inexistente.xml
2025-05-13 16:18:50,192 - main.process.invoice_processor - ERROR - Error al procesar la factura ruta/inexistente.xml: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:18:50,192 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 76, in process_invoice
    raise FileNotFoundError(error_msg)
FileNotFoundError: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:18:50,194 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:18:50,196 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:18:50,201 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/factura_ejemplo.xml
2025-05-13 16:18:50,202 - main.process.invoice_processor - INFO - Factura FAC001-123 procesada exitosamente
2025-05-13 16:19:28,346 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:19:28,350 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml
2025-05-13 16:19:28,354 - main.process.invoice_processor - INFO - Factura FAC-EMB-001 procesada exitosamente
2025-05-13 16:19:28,370 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml
2025-05-13 16:19:28,370 - main.process.invoice_processor - ERROR - Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:19:28,370 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:19:28,370 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 82, in process_invoice
    tree = etree.parse(str(xml_path))
  File "src/lxml/etree.pyx", line 3590, in lxml.etree.parse
  File "src/lxml/parser.pxi", line 1958, in lxml.etree._parseDocument
  File "src/lxml/parser.pxi", line 1984, in lxml.etree._parseDocumentFromURL
  File "src/lxml/parser.pxi", line 1887, in lxml.etree._parseDocFromFile
  File "src/lxml/parser.pxi", line 1200, in lxml.etree._BaseParser._parseDocFromFile
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml", line 1
lxml.etree.XMLSyntaxError: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 87, in process_invoice
    raise InvoiceFormatError(error_msg) from e
main.process.invoice_processor.InvoiceFormatError: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:19:28,373 - main.process.invoice_processor - ERROR - El archivo no existe: ruta/inexistente.xml
2025-05-13 16:19:28,373 - main.process.invoice_processor - ERROR - Error al procesar la factura ruta/inexistente.xml: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:19:28,373 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 76, in process_invoice
    raise FileNotFoundError(error_msg)
FileNotFoundError: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:19:28,375 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:19:28,375 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:19:28,381 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/factura_ejemplo.xml
2025-05-13 16:19:28,382 - main.process.invoice_processor - INFO - Factura FAC001-123 procesada exitosamente
2025-05-13 16:20:43,628 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:20:43,632 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml
2025-05-13 16:20:43,635 - main.process.invoice_processor - INFO - Factura FAC-EMB-001 procesada exitosamente
2025-05-13 16:20:43,638 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml
2025-05-13 16:20:43,639 - main.process.invoice_processor - ERROR - Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:20:43,639 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:20:43,639 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 82, in process_invoice
    tree = etree.parse(str(xml_path))
  File "src/lxml/etree.pyx", line 3590, in lxml.etree.parse
  File "src/lxml/parser.pxi", line 1958, in lxml.etree._parseDocument
  File "src/lxml/parser.pxi", line 1984, in lxml.etree._parseDocumentFromURL
  File "src/lxml/parser.pxi", line 1887, in lxml.etree._parseDocFromFile
  File "src/lxml/parser.pxi", line 1200, in lxml.etree._BaseParser._parseDocFromFile
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml", line 1
lxml.etree.XMLSyntaxError: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 87, in process_invoice
    raise InvoiceFormatError(error_msg) from e
main.process.invoice_processor.InvoiceFormatError: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:20:43,641 - main.process.invoice_processor - ERROR - El archivo no existe: ruta/inexistente.xml
2025-05-13 16:20:43,642 - main.process.invoice_processor - ERROR - Error al procesar la factura ruta/inexistente.xml: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:20:43,642 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 76, in process_invoice
    raise FileNotFoundError(error_msg)
FileNotFoundError: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:20:43,643 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:20:43,644 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:20:43,659 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/factura_ejemplo.xml
2025-05-13 16:20:43,659 - main.process.invoice_processor - INFO - Factura FAC001-123 procesada exitosamente
2025-05-13 16:21:24,762 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:21:24,772 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml
2025-05-13 16:21:24,782 - main.process.invoice_processor - INFO - Factura FAC-EMB-001 procesada exitosamente
2025-05-13 16:21:24,790 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml
2025-05-13 16:21:24,790 - main.process.invoice_processor - ERROR - Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:21:24,791 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:21:24,791 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 82, in process_invoice
    tree = etree.parse(str(xml_path))
  File "src/lxml/etree.pyx", line 3590, in lxml.etree.parse
  File "src/lxml/parser.pxi", line 1958, in lxml.etree._parseDocument
  File "src/lxml/parser.pxi", line 1984, in lxml.etree._parseDocumentFromURL
  File "src/lxml/parser.pxi", line 1887, in lxml.etree._parseDocFromFile
  File "src/lxml/parser.pxi", line 1200, in lxml.etree._BaseParser._parseDocFromFile
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml", line 1
lxml.etree.XMLSyntaxError: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 87, in process_invoice
    raise InvoiceFormatError(error_msg) from e
main.process.invoice_processor.InvoiceFormatError: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:21:24,795 - main.process.invoice_processor - ERROR - El archivo no existe: ruta/inexistente.xml
2025-05-13 16:21:24,795 - main.process.invoice_processor - ERROR - Error al procesar la factura ruta/inexistente.xml: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:21:24,795 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 76, in process_invoice
    raise FileNotFoundError(error_msg)
FileNotFoundError: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:21:24,797 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:21:24,798 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:21:24,815 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/factura_ejemplo.xml
2025-05-13 16:21:24,816 - main.process.invoice_processor - INFO - Factura FAC001-123 procesada exitosamente
2025-05-13 16:25:48,287 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:25:48,291 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml
2025-05-13 16:25:48,295 - main.process.invoice_processor - INFO - Factura FAC-EMB-001 procesada exitosamente
2025-05-13 16:25:48,298 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml
2025-05-13 16:25:48,298 - main.process.invoice_processor - ERROR - Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:25:48,299 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:25:48,299 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 82, in process_invoice
    tree = etree.parse(str(xml_path))
  File "src/lxml/etree.pyx", line 3590, in lxml.etree.parse
  File "src/lxml/parser.pxi", line 1958, in lxml.etree._parseDocument
  File "src/lxml/parser.pxi", line 1984, in lxml.etree._parseDocumentFromURL
  File "src/lxml/parser.pxi", line 1887, in lxml.etree._parseDocFromFile
  File "src/lxml/parser.pxi", line 1200, in lxml.etree._BaseParser._parseDocFromFile
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml", line 1
lxml.etree.XMLSyntaxError: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 87, in process_invoice
    raise InvoiceFormatError(error_msg) from e
main.process.invoice_processor.InvoiceFormatError: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:25:48,302 - main.process.invoice_processor - ERROR - El archivo no existe: ruta/inexistente.xml
2025-05-13 16:25:48,302 - main.process.invoice_processor - ERROR - Error al procesar la factura ruta/inexistente.xml: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:25:48,302 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 76, in process_invoice
    raise FileNotFoundError(error_msg)
FileNotFoundError: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:25:48,304 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:25:48,305 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:25:48,319 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/factura_ejemplo.xml
2025-05-13 16:25:48,320 - main.process.invoice_processor - INFO - Factura FAC001-123 procesada exitosamente
2025-05-13 16:27:23,338 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:27:23,342 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:27:23,346 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:28:34,227 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:28:34,231 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml
2025-05-13 16:28:34,235 - main.process.invoice_processor - INFO - Factura FAC-EMB-001 procesada exitosamente
2025-05-13 16:28:34,240 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml
2025-05-13 16:28:34,241 - main.process.invoice_processor - ERROR - Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:28:34,241 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:28:34,241 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 82, in process_invoice
    tree = etree.parse(str(xml_path))
  File "src/lxml/etree.pyx", line 3590, in lxml.etree.parse
  File "src/lxml/parser.pxi", line 1958, in lxml.etree._parseDocument
  File "src/lxml/parser.pxi", line 1984, in lxml.etree._parseDocumentFromURL
  File "src/lxml/parser.pxi", line 1887, in lxml.etree._parseDocFromFile
  File "src/lxml/parser.pxi", line 1200, in lxml.etree._BaseParser._parseDocFromFile
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml", line 1
lxml.etree.XMLSyntaxError: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 87, in process_invoice
    raise InvoiceFormatError(error_msg) from e
main.process.invoice_processor.InvoiceFormatError: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:28:34,244 - main.process.invoice_processor - ERROR - El archivo no existe: ruta/inexistente.xml
2025-05-13 16:28:34,244 - main.process.invoice_processor - ERROR - Error al procesar la factura ruta/inexistente.xml: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:28:34,245 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 76, in process_invoice
    raise FileNotFoundError(error_msg)
FileNotFoundError: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:28:34,246 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:28:34,247 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:28:34,263 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/factura_ejemplo.xml
2025-05-13 16:28:34,263 - main.process.invoice_processor - INFO - Factura FAC001-123 procesada exitosamente
2025-05-13 16:29:02,527 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:29:02,534 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:29:02,540 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:29:27,254 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:29:27,260 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml
2025-05-13 16:29:27,265 - main.process.invoice_processor - INFO - Factura FAC-EMB-001 procesada exitosamente
2025-05-13 16:29:27,269 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml
2025-05-13 16:29:27,270 - main.process.invoice_processor - ERROR - Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:29:27,270 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:29:27,270 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 82, in process_invoice
    tree = etree.parse(str(xml_path))
  File "src/lxml/etree.pyx", line 3590, in lxml.etree.parse
  File "src/lxml/parser.pxi", line 1958, in lxml.etree._parseDocument
  File "src/lxml/parser.pxi", line 1984, in lxml.etree._parseDocumentFromURL
  File "src/lxml/parser.pxi", line 1887, in lxml.etree._parseDocFromFile
  File "src/lxml/parser.pxi", line 1200, in lxml.etree._BaseParser._parseDocFromFile
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml", line 1
lxml.etree.XMLSyntaxError: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 87, in process_invoice
    raise InvoiceFormatError(error_msg) from e
main.process.invoice_processor.InvoiceFormatError: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:29:27,274 - main.process.invoice_processor - ERROR - El archivo no existe: ruta/inexistente.xml
2025-05-13 16:29:27,274 - main.process.invoice_processor - ERROR - Error al procesar la factura ruta/inexistente.xml: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:29:27,274 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 76, in process_invoice
    raise FileNotFoundError(error_msg)
FileNotFoundError: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:29:27,276 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:29:27,276 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:29:27,278 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/factura_ejemplo.xml
2025-05-13 16:29:27,278 - main.process.invoice_processor - INFO - Factura FAC001-123 procesada exitosamente
2025-05-13 16:29:44,024 - main.process.invoice_processor - DEBUG - Modo depuración activado
2025-05-13 16:29:44,030 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/documento_con_factura_embebida.xml
2025-05-13 16:29:44,034 - main.process.invoice_processor - INFO - Factura FAC-EMB-001 procesada exitosamente
2025-05-13 16:29:44,038 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml
2025-05-13 16:29:44,038 - main.process.invoice_processor - ERROR - Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:29:44,038 - main.process.invoice_processor - ERROR - Error al procesar la factura /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:29:44,038 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 82, in process_invoice
    tree = etree.parse(str(xml_path))
  File "src/lxml/etree.pyx", line 3590, in lxml.etree.parse
  File "src/lxml/parser.pxi", line 1958, in lxml.etree._parseDocument
  File "src/lxml/parser.pxi", line 1984, in lxml.etree._parseDocumentFromURL
  File "src/lxml/parser.pxi", line 1887, in lxml.etree._parseDocFromFile
  File "src/lxml/parser.pxi", line 1200, in lxml.etree._BaseParser._parseDocFromFile
  File "src/lxml/parser.pxi", line 633, in lxml.etree._ParserContext._handleParseResultDoc
  File "src/lxml/parser.pxi", line 743, in lxml.etree._handleParseResult
  File "src/lxml/parser.pxi", line 672, in lxml.etree._raiseParseError
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml", line 1
lxml.etree.XMLSyntaxError: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 87, in process_invoice
    raise InvoiceFormatError(error_msg) from e
main.process.invoice_processor.InvoiceFormatError: Error de sintaxis XML en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/archivo_invalido.xml: Opening and ending tag mismatch: invalid line 1 and root, line 1, column 26 (archivo_invalido.xml, line 1)
2025-05-13 16:29:44,041 - main.process.invoice_processor - ERROR - El archivo no existe: ruta/inexistente.xml
2025-05-13 16:29:44,041 - main.process.invoice_processor - ERROR - Error al procesar la factura ruta/inexistente.xml: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:29:44,041 - main.process.invoice_processor - ERROR - Detalles del error:
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/process/invoice_processor.py", line 76, in process_invoice
    raise FileNotFoundError(error_msg)
FileNotFoundError: El archivo no existe: ruta/inexistente.xml
2025-05-13 16:29:44,043 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/nota_credito_ejemplo.xml
2025-05-13 16:29:44,043 - main.process.invoice_processor - INFO - Factura NC-001-789 procesada exitosamente
2025-05-13 16:29:44,045 - main.process.invoice_processor - INFO - Procesando factura: /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/tests/process/test_data/factura_ejemplo.xml
2025-05-13 16:29:44,045 - main.process.invoice_processor - INFO - Factura FAC001-123 procesada exitosamente
2025-05-13 16:32:22,349 - __main__ - INFO - ==================================================
2025-05-13 16:32:22,361 - __main__ - INFO - Iniciando Facturae Optimus v1.0.0
2025-05-13 16:32:22,361 - __main__ - INFO - --------------------------------------------------
2025-05-13 16:32:22,362 - printer.fo_tenants - WARNING - Archivo /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/build/tenant/tenants.json no encontrado. Se creará uno nuevo al guardar.
2025-05-13 16:32:22,362 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-05-13 16:32:22,362 - main.printer.fo_menu - ERROR - Error inesperado: EOF when reading a line
2025-05-13 16:32:22,362 - main.printer.fo_menu - CRITICAL - Error crítico en el menú principal: EOF when reading a line
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/printer/fo_menu.py", line 111, in ejecutar
    opcion = input("\nSeleccione una opción: ").strip()
             ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
EOFError: EOF when reading a line

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/printer/fo_menu.py", line 137, in main_menu
    menu.ejecutar()
    ~~~~~~~~~~~~~^^
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/printer/fo_menu.py", line 125, in ejecutar
    if input("¿Desea continuar? (s/n): ").strip().lower() != 's':
       ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
EOFError: EOF when reading a line
2025-05-13 16:32:22,363 - __main__ - INFO - Aplicación finalizada
2025-05-13 16:32:22,363 - __main__ - INFO - ==================================================
2025-05-13 16:32:28,273 - __main__ - INFO - ==================================================
2025-05-13 16:32:28,274 - __main__ - INFO - Iniciando Facturae Optimus v1.0.0
2025-05-13 16:32:28,274 - __main__ - INFO - --------------------------------------------------
2025-05-13 16:32:28,274 - printer.fo_tenants - WARNING - Archivo /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/build/tenant/tenants.json no encontrado. Se creará uno nuevo al guardar.
2025-05-13 16:32:28,274 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-05-13 16:32:28,275 - main.printer.fo_menu - ERROR - Error inesperado: EOF when reading a line
2025-05-13 16:32:28,275 - main.printer.fo_menu - CRITICAL - Error crítico en el menú principal: EOF when reading a line
Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/printer/fo_menu.py", line 111, in ejecutar
    opcion = input("\nSeleccione una opción: ").strip()
             ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
EOFError: EOF when reading a line

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/printer/fo_menu.py", line 137, in main_menu
    menu.ejecutar()
    ~~~~~~~~~~~~~^^
  File "/home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/main/printer/fo_menu.py", line 125, in ejecutar
    if input("¿Desea continuar? (s/n): ").strip().lower() != 's':
       ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
EOFError: EOF when reading a line
2025-05-13 16:32:28,276 - __main__ - INFO - Aplicación finalizada
2025-05-13 16:32:28,277 - __main__ - INFO - ==================================================
2025-05-13 16:32:54,066 - __main__ - INFO - ==================================================
2025-05-13 16:32:54,066 - __main__ - INFO - Iniciando Facturae Optimus v1.0.0
2025-05-13 16:32:54,066 - __main__ - INFO - --------------------------------------------------
2025-05-13 16:32:54,067 - printer.fo_tenants - WARNING - Archivo /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/build/tenant/tenants.json no encontrado. Se creará uno nuevo al guardar.
2025-05-13 16:32:54,067 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-05-13 16:34:24,466 - printer.fo_tenants - INFO - Configuración de 1 tenants guardada en /home/shark/developer/git/Facturae Optimus/facturasElectronicaPeajes/build/tenant/tenants.json
2025-06-05 15:39:58,830 - __main__ - INFO - ==================================================
2025-06-05 15:39:58,845 - __main__ - INFO - Iniciando Facturae Optimus v1.0.0
2025-06-05 15:39:58,845 - __main__ - INFO - --------------------------------------------------
2025-06-05 15:39:58,851 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-06-05 15:40:39,713 - main.printer.fo_menu - INFO - Saliendo de la aplicación...
2025-06-05 15:40:39,713 - __main__ - INFO - Aplicación finalizada
2025-06-05 15:40:39,713 - __main__ - INFO - ==================================================
2025-06-05 15:40:41,906 - __main__ - INFO - ==================================================
2025-06-05 15:40:41,906 - __main__ - INFO - Iniciando Facturae Optimus v1.0.0
2025-06-05 15:40:41,906 - __main__ - INFO - --------------------------------------------------
2025-06-05 15:40:41,906 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-06-05 15:40:54,786 - main.printer.fo_menu - ERROR - Error al procesar la opción 5: SEARCH command error: BAD [b'Could not parse command']
2025-06-05 15:41:20,513 - main.printer.fo_menu - INFO - Saliendo de la aplicación...
2025-06-05 15:41:20,513 - __main__ - INFO - Aplicación finalizada
2025-06-05 15:41:20,513 - __main__ - INFO - ==================================================
2025-06-05 15:41:22,136 - __main__ - INFO - ==================================================
2025-06-05 15:41:22,136 - __main__ - INFO - Iniciando Facturae Optimus v1.0.0
2025-06-05 15:41:22,136 - __main__ - INFO - --------------------------------------------------
2025-06-05 15:41:22,136 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-06-05 15:52:36,646 - main.printer.fo_menu - INFO - Saliendo de la aplicación...
2025-06-05 15:52:36,686 - __main__ - INFO - Aplicación finalizada
2025-06-05 15:52:36,686 - __main__ - INFO - ==================================================
2025-07-04 20:15:11,736 - __main__ - INFO - ==================================================
2025-07-04 20:15:11,745 - __main__ - INFO - Iniciando Facturae Optimus v1.0.0
2025-07-04 20:15:11,745 - __main__ - INFO - --------------------------------------------------
2025-07-04 20:15:11,746 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-07-04 20:22:54,211 - main.printer.fo_menu - INFO - Saliendo de la aplicación...
2025-07-04 20:22:54,223 - __main__ - INFO - Aplicación finalizada
2025-07-04 20:22:54,223 - __main__ - INFO - ==================================================
2025-08-04 18:23:04,855 - __main__ - INFO - ==================================================
2025-08-04 18:23:04,869 - __main__ - INFO - Iniciando Facturae Optimus v1.0.0
2025-08-04 18:23:04,869 - __main__ - INFO - --------------------------------------------------
2025-08-04 18:23:04,881 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-08-04 18:37:08,291 - main.printer.fo_menu - INFO - Saliendo de la aplicación...
2025-08-04 18:37:08,291 - __main__ - INFO - Aplicación finalizada
2025-08-04 18:37:08,291 - __main__ - INFO - ==================================================
2025-08-04 19:02:54,333 - main.fo_start - INFO - ==================================================
2025-08-04 19:02:54,340 - main.fo_start - INFO - Iniciando Facturae Optimus v1.0.0
2025-08-04 19:02:54,340 - main.fo_start - INFO - --------------------------------------------------
2025-08-04 19:02:54,341 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-08-04 19:03:16,270 - main.printer.fo_menu - INFO - Saliendo de la aplicación...
2025-08-04 19:03:16,271 - main.fo_start - INFO - Aplicación finalizada
2025-08-04 19:03:16,271 - main.fo_start - INFO - ==================================================
2025-08-04 19:05:00,830 - main.fo_start - INFO - ==================================================
2025-08-04 19:05:00,845 - main.fo_start - INFO - Iniciando Facturae Optimus v1.0.0
2025-08-04 19:05:00,845 - main.fo_start - INFO - --------------------------------------------------
2025-08-04 19:05:00,846 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-09-11 18:02:00,927 - __main__ - INFO - ==================================================
2025-09-11 18:02:00,963 - __main__ - INFO - Iniciando Facturae Optimus v1.0.0
2025-09-11 18:02:00,964 - __main__ - INFO - --------------------------------------------------
2025-09-11 18:02:00,964 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-09-11 18:02:16,013 - main.printer.fo_menu - INFO - Saliendo de la aplicación...
2025-09-11 18:02:16,013 - __main__ - INFO - Aplicación finalizada
2025-09-11 18:02:16,013 - __main__ - INFO - ==================================================
2025-09-11 18:02:17,827 - __main__ - INFO - ==================================================
2025-09-11 18:02:17,827 - __main__ - INFO - Iniciando Facturae Optimus v1.0.0
2025-09-11 18:02:17,827 - __main__ - INFO - --------------------------------------------------
2025-09-11 18:02:17,827 - main.printer.fo_menu - INFO - Menú principal iniciado
2025-09-11 18:02:48,290 - main.printer.fo_menu - ERROR - Error al procesar la opción 5: b'[AUTHENTICATIONFAILED] Invalid credentials (Failure)'
2025-09-11 18:18:52,689 - main.printer.fo_menu - INFO - Saliendo de la aplicación...
2025-09-11 18:18:52,715 - __main__ - INFO - Aplicación finalizada
2025-09-11 18:18:52,715 - __main__ - INFO - ==================================================
