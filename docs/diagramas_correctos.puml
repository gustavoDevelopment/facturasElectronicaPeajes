@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

Person(usuario, "Usuario")
System_Ext(peajes, "Sistema de Peajes")
System_Ext(email, "Correo Electrónico")
System_Ext(impresora, "Impresora")
System_Ext(plantilla_excel, "Plantilla Excel")

System(facturae_optimus, "Facturae Optimus")

usuario --> facturae_optimus : Interactúa con
peajes --> facturae_optimus : Envía facturas XML
email --> facturae_optimus : Envía correos con facturas
facturae_optimus --> impresora : Imprime facturas
facturae_optimus --> plantilla_excel : Exporta datos

@enduml


@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

Person(usuario, "Usuario")
System_Ext(peajes, "Sistema de Peajes")
System_Ext(email, "Correo Electrónico")
System_Ext(impresora, "Impresora")
System_Ext(plantilla_excel, "Plantilla Excel")

System(facturae_optimus, "Facturae Optimus")

Container(bussines, "Bussines", "Lógica de negocio", "Python")
Container(process, "Procesamiento", "Procesa y valida facturas XML", "Python")
Container(printer, "Impresión", "Gestiona la impresión de documentos", "Python")
Container(plantilla, "Plantilla", "Genera plantillas Excel", "Python")
Container(email, "Email", "Manejo de correo", "Python")

usuario --> bussines : Interactúa con
peajes --> process : Envía facturas XML
email --> process : Envía correos
process --> printer : Envía a imprimir
process --> plantilla : Envía datos para plantilla
bussines --> process : Utiliza

@enduml


@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

System(facturae_optimus, "Facturae Optimus")

Component(bussines, "Bussines", "Lógica de negocio", "Python")
Component(process, "Process", "Procesamiento de facturas", "Python")
Component(printer, "Printer", "Impresión", "Python")
Component(plantilla, "Plantilla", "Generación de plantillas", "Python")
Component(email, "Email", "Manejo de correo", "Python")

Component(invoice_processor, "InvoiceProcessor", "Procesador de facturas XML", "Python")
Component(menu, "Menu", "Interfaz de usuario", "Python")
Component(tc_email, "TC Email", "Manejo de correo", "Python")
Component(tc_facturacion, "TC Facturación", "Procesamiento de facturas", "Python")

bussines --> process : Utiliza
process --> invoice_processor : Utiliza
process --> printer : Envía a imprimir
process --> plantilla : Genera plantillas
email --> tc_email : Utiliza
process --> tc_facturacion : Utiliza

@enduml


@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Dynamic.puml

System(facturae_optimus, "Facturae Optimus")

Dynamic(process, "Procesamiento")

== Recibir Factura ==
process --> email : descargar_correos()
process --> process : recibir_factura()
process --> invoice_processor : validar_factura()
process --> invoice_processor : extraer_factura_embebida()

== Extraer Datos ==
process --> invoice_processor : extraer_datos_basicos()
process --> invoice_processor : extraer_parties_data()
process --> invoice_processor : extraer_invoice_parts()
process --> invoice_processor : process_invoice_items()

== Generar Plantilla ==
process --> plantilla : generar_plantilla()
process --> plantilla : exportar_datos()

== Imprimir Factura ==
process --> printer : imprimir_factura()

@enduml
